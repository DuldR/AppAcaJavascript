(()=>{var t={280:t=>{const e={followUser:t=>e.changeStatus(t,"POST"),unfollowUser:t=>e.changeStatus(t,"DELETE"),changeStatus:(t,e)=>$.ajax({url:"/users/"+t+"/follow",dataType:"json",method:e}),searchUsers:t=>$.ajax({url:"/users/search",dataType:"json",data:t})};t.exports=e},591:(t,e,s)=>{const l=s(280);t.exports=class{constructor(t,e){this.$ele=$(t),this.userId=this.$ele.data("user-id")||e.userId,this.followState=this.$ele.data("initial-follow-state")||e.followState,this.render(),this.$ele.on("click",this.handleClick.bind(this))}render(){!0===this.followState?this.$ele.text("Unfollow!"):this.$ele.text("Follow!"),this.$ele.prop("disabled",!1)}handleClick(t){const e=this;this.$ele.prop("disabled",!0),t.preventDefault(),!0===this.followState?l.unfollowUser(this.userId).then((()=>{e.followState=!e.followState,e.render()})):!1===this.followState&&l.followUser(this.userId).then((()=>{e.followState=!e.followState,e.render()}))}}},265:(t,e,s)=>{const l=s(280),o=s(591);t.exports=class{constructor(t){this.$ele=$(t),this.$input=$(t).find("input"),this.$ul=$(t).find("ul.users"),this.$ele.on("input",this.handleInput.bind(this))}renderResults(t){t.forEach((t=>{console.log(t),this.$ul.append(`<li><a href='http://localhost:3000/users/${t.id}'>`+t.username+"</a><button></button></li>");let e=this.$ul.find(`li:contains(${t.username})`).find("button");new o(e,{userId:t.id,followState:t.followed})})),this.$ul.find("li").each(((t,e)=>{console.log(e)}))}handleInput(t){t.preventDefault(),this.$ul.empty(),l.searchUsers(this.$input).then((t=>{this.renderResults(t)}))}}}},e={};function s(l){if(e[l])return e[l].exports;var o=e[l]={exports:{}};return t[l](o,o.exports,s),o.exports}(()=>{const t=s(591),e=s(265);console.log("Webpack work"),$((()=>{const s=$("button.follow-toggle"),l=$("nav.users-search");s.each((function(e,s){new t(s)})),l.each((function(t,s){new e(s)}))}))})()})();
//# sourceMappingURL=bundle.js.map